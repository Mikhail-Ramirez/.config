(self.webpackChunk=self.webpackChunk||[]).push([[6011],{9696:(e,t,i)=>{i.r(t),i.d(t,{Coda:()=>n,getInjectionLayoutForGButtonForDocument:()=>k});var n,o=i(20715),l=i(65647),r=i(60165),a=i(39620),c=i(25770),d=i(4798),u=i(80831),s=i(70874),f=i(16703),p=i(87234),g=i(38684),h=i(72779),m=i(65384),b=i(82133),C=i(75629),v=i(59898),x=i(21220),S=i(87086),w=i(5614),y=i(6088),E=i(37094),T=i(23070),G=i(55793);!function(e){function t({changes:e,deltaChange:t}){return e.length>0||t.delta.ops.length>0}function i(e){var i;const n=(0,S.B)(e.field),o=e.experimentClient.isGateEnabled(d.K.CodaUseCSSTransformTranslateForUnderlinePosition);let f;if(e.experimentClient.isGateEnabled(d.K.CodaPositionGbuttonIntoFixedContainer)&&"editable"===e.field.getAttribute("data-coda-ui-id")){const e=null===(i=document.querySelector('[data-coda-ui-id="help-button"]'))||void 0===i?void 0:i.parentElement;e&&(f=k(e))}const p=c.h.create(!1),C=s.S.sec1.pipe((0,l.U)((()=>{var e;for(const t of document.querySelectorAll("span[role=button]"))if("Suggesting edits"===(null===(e=t.textContent)||void 0===e?void 0:e.trim()))return!0;return!1})),(0,r.x)(((e,t)=>e===t))).subscribe(a.wW(p));return{createLayout:()=>new g.A(e.field,{...f,createGbuttonShiftBehavior:()=>p.view((e=>e?{top:self.innerHeight,left:self.innerWidth}:{top:0,left:0})),getFieldSize:(e,t)=>{if(p.get())return{width:0,height:0};const i=o&&e.firstElementChild?(0,h.Bi)(self.getComputedStyle(e.firstElementChild)):void 0;return{width:t.width-((null==i?void 0:i.x)||0),height:t.height-((null==i?void 0:i.y)||0)}}}),createSelectionSource:()=>n,createTextObserver:()=>new w.j(e.field,m.k.fromDiff,n,void 0,y.Z.create,t),extraCondition:()=>u.T.isSupported(),createReplacementService:t=>new b.V0({eventTarget:e.field,textObserver:t,asyncReplaceDelay:100,deletionEvent:"paste",experimentClient:e.experimentClient}),validationRules:[...v.u,(0,x.Uo)(20,135)],onDispose:()=>{C.unsubscribe()}}}e.isNonEmptyChange=t,e.getContentIntegrationConfigure=i,e.content=C.T.contentEditable("CodaIO.content",i),e.page=(0,E.$W)({name:"coda",domain:G.LF},[e.content,T.k.iframeHostRule,C.T.textarea("generic",(e=>{const t=e.experimentClient.isGateEnabled(d.K.CodaHideGbuttonForDocumentTitle);return{gbuttonMinimizeState:(0,o.of)(!0),createLayout:()=>new g.A(e.field,{injectIntegrationRoot:e=>{const i=e.editorElement.getAttribute("data-coda-ui-id");t&&i&&["documentTitle"].includes(i)&&"gbutton"===e.grammarlyPart||(0,g.R)(e)}}),validationRules:[...v.u,(0,x.Uo)(20,45),{ruleName:"skipTableTitle",match:(e,t)=>"tableTitle"!==t.field.getAttribute("data-coda-ui-id")}]}}))])}(n||(n={}));const k=e=>({customGbuttonPositioning:{injectionElement:e,injectionStyle:{top:"-5px",right:"0px"},createPositionStyleBehavior:e=>e.pipe(l.U((e=>({position:"absolute",width:"auto",height:"auto",pointerEvents:"all",right:-e.left+"px",bottom:-e.top+"px"})))),calculateMetrics:(e,t,i)=>{const n=p.p8.create({top:i.top+-5,left:e.size.width-i.left});return{offset:n,page:p.Cv.fromOffset(n,p.Cv.fromClient(e.client,{top:t.scrollY,left:t.scrollX}),{top:0,left:0}),client:p.Ir.create(p.E9.plus(e.client,n)),effectivePadding:{top:0,right:0,bottom:0,left:0},size:f.V.gButtonMaxSize}}}})}}]);